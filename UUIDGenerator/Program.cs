using Newtonsoft.Json.Linq;
using UUIDGenerator.Services;

var dto = "{\r\n    \"receipts\": [\r\n        {\r\n            \"header\": {\r\n                \"dateTimeIssued\": \"2025-11-24T02:00:00Z\",\r\n                \"receiptNumber\": \"22000000000580830\",\r\n                \"uuid\": \"\",\r\n                \"previousUUID\": \"\",\r\n                \"referenceOldUUID\": \"\",\r\n                \"currency\": \"EGP\",\r\n                \"exchangeRate\": 0,\r\n                \"sOrderNameCode\": \"1730\",\r\n                \"orderdeliveryMode\": \"\",\r\n                \"grossWeight\": 0.00,\r\n                \"netWeight\": 0.00\r\n              \r\n            },\r\n            \"documentType\": {\r\n                \"receiptType\": \"S\",\r\n                \"typeVersion\": \"1.2\"\r\n            },\r\n            \"seller\": {\r\n                \"rin\": \"474218643\",\r\n                \"companyTradeName\": \"توفير للمواد الغذائيه كازيون\",\r\n                \"branchCode\": \"472\",\r\n                \"branchAddress\": {\r\n                    \"country\": \"EG\",\r\n                    \"governate\": \"giza\",\r\n                    \"regionCity\": \"pyramids\",\r\n                    \"street\": \"4 ش الأمراء التعاون فيصل الهرم \",\r\n                    \"buildingNumber\": \"4\",\r\n                    \"postalCode\": \"\",\r\n                    \"floor\": \"\",\r\n                    \"room\": \"\",\r\n                    \"landmark\": \"\",\r\n                    \"additionalInformation\": \"\"\r\n                },\r\n                \"deviceSerialNumber\": \"56-50502718\",\r\n                \"syndicateLicenseNumber\": \"\",\r\n                \"activityCode\": \"4721\"\r\n            },\r\n            \"buyer\": {\r\n                \"type\": \"P\",\r\n                \"id\": \"\",\r\n                \"name\": \"taxpayer 1\",\r\n                \"mobileNumber\": \"\",\r\n                \"paymentNumber\": \"\"\r\n            },\r\n            \"itemData\": [\r\n                {\r\n                    \"internalCode\": \"000000000120000796\",\r\n                    \"description\": \"السنبلة ملوخيه  400 جم\",\r\n                    \"itemType\": \"GS1\",\r\n                    \"itemCode\": \"6281073150869\",\r\n                    \"unitType\": \"EA\",\r\n                    \"quantity\": 1.00,\r\n                    \"unitPrice\": 18.95000,\r\n                    \"netSale\": 14.94999,\r\n                    \"totalSale\": 18.95000,\r\n                    \"total\": 18.95000,\r\n                    \"commercialDiscountData\": null,\r\n                    \"itemDiscountData\": [\r\n                        {\r\n                            \"amount\": 4.00,\r\n                            \"description\":\"promotion\",\r\n                             \"rate\":4.00\r\n                        }\r\n                    ],\r\n                    \"additionalCommercialDiscount\": null,\r\n                    \"additionalItemDiscount\": null,\r\n                    \"valueDifference\": 0.00,\r\n                    \"taxableItems\": null\r\n                }\r\n            ],\r\n            \"totalSales\": 18.95000,\r\n            \"totalCommercialDiscount\": 0.0,\r\n            \"totalItemsDiscount\": 0.0,\r\n            \"extraReceiptDiscountData\": null,\r\n            \"netAmount\": 14.94999,\r\n            \"feesAmount\": 0.0,\r\n            \"totalAmount\": 14.94999,\r\n            \"taxTotals\": null,\r\n            \"paymentMethod\": \"C\",\r\n            \"adjustment\": 0.0,\r\n            \"contractor\": {\r\n                \"name\": \"\",\r\n                \"amount\": 0.0,\r\n                \"rate\": 0.0\r\n            },\r\n            \"beneficiary\": {\r\n                \"amount\": 0.0,\r\n                \"rate\": 0.0\r\n            }\r\n        }\r\n    ]\r\n    \r\n}";
JObject receipt = JObject.Parse(dto);


// Serialize & compute UUID
string uuid = EtaSerializer.ComputeUUID(receipt);

// Output
Console.WriteLine("Serialized JSON:\n" + receipt.ToString());
Console.WriteLine("\nSerialized for Hash:\n" + EtaSerializer.Serialize(receipt));
Console.WriteLine("\nGenerated UUID:\n" + uuid);