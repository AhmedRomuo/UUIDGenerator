using Newtonsoft.Json.Linq;
using UUIDGenerator.Services;

var dto = "{\r\n  \"issuer\": {\r\n    \"address\": {\r\n      \"branchID\": \"1\",\r\n      \"country\": \"EG\",\r\n      \"governate\": \"Cairo\",\r\n      \"regionCity\": \"Nasr City\",\r\n      \"street\": \"580 Clementina Key\",\r\n      \"buildingNumber\": \"Bldg. 0\",\r\n      \"postalCode\": \"68030\",\r\n      \"floor\": \"1\",\r\n      \"room\": \"123\",\r\n      \"landmark\": \"7660 Melody Trail\",\r\n      \"additionalInformation\": \"beside Townhall\"\r\n    },\r\n    \"type\": \"B\",\r\n    \"id\": \"113317713\",\r\n    \"name\": \"Issuer Company\"\r\n  },\r\n  \"receiver\": {\r\n    \"address\": {\r\n      \"country\": \"EG\",\r\n      \"governate\": \"Egypt\",\r\n      \"regionCity\": \"Mufazat al Ismlyah\",\r\n      \"street\": \"580 Clementina Key\",\r\n      \"buildingNumber\": \"Bldg. 0\",\r\n      \"postalCode\": \"68030\",\r\n      \"floor\": \"1\",\r\n      \"room\": \"123\",\r\n      \"landmark\": \"7660 Melody Trail\",\r\n      \"additionalInformation\": \"beside Townhall\"\r\n    },\r\n    \"type\": \"B\",\r\n    \"id\": \"313717919\",\r\n    \"name\": \"Receiver\"\r\n  },\r\n  \"documentType\": \"I\",\r\n  \"documentTypeVersion\": \"0.9\",\r\n  \"dateTimeIssued\": \"2020-10-27T23:59:59Z\",\r\n  \"taxpayerActivityCode\": \"4620\",\r\n  \"internalID\": \"IID1\",\r\n  \"purchaseOrderReference\": \"P-233-A6375\",\r\n  \"purchaseOrderDescription\": \"purchase Order description\",\r\n  \"salesOrderReference\": \"1231\",\r\n  \"salesOrderDescription\": \"Sales Order description\",\r\n  \"proformaInvoiceNumber\": \"SomeValue\",\r\n  \"payment\": {\r\n    \"bankName\": \"SomeValue\",\r\n    \"bankAddress\": \"SomeValue\",\r\n    \"bankAccountNo\": \"SomeValue\",\r\n    \"bankAccountIBAN\": \"\",\r\n    \"swiftCode\": \"\",\r\n    \"terms\": \"SomeValue\"\r\n  },\r\n  \"delivery\": {\r\n    \"approach\": \"SomeValue\",\r\n    \"packaging\": \"SomeValue\",\r\n    \"dateValidity\": \"2020-09-28T09:30:10Z\",\r\n    \"exportPort\": \"SomeValue\",\r\n    \"countryOfOrigin\": \"EG\",\r\n    \"grossWeight\": 10.5,\r\n    \"netWeight\": 20.5,\r\n    \"terms\": \"SomeValue\"\r\n  },\r\n  \"invoiceLines\": [\r\n    {\r\n      \"description\": \"Computer1\",\r\n      \"itemType\": \"GPC\",\r\n      \"itemCode\": \"6221218058490\",\r\n      \"unitType\": \"EA\",\r\n      \"quantity\": 5,\r\n      \"internalCode\": \"IC0\",\r\n      \"salesTotal\": 947,\r\n      \"total\": 2969.89,\r\n      \"valueDifference\": 7,\r\n      \"totalTaxableFees\": 817.42,\r\n      \"netTotal\": 880.71,\r\n      \"itemsDiscount\": 5,\r\n      \"unitValue\": {\r\n        \"currencySold\": \"EUR\",\r\n        \"amountEGP\": 189.4,\r\n        \"amountSold\": 10,\r\n        \"currencyExchangeRate\": 18.94\r\n      },\r\n      \"discount\": {\r\n        \"rate\": 7,\r\n        \"amount\": 66.29\r\n      },\r\n      \"taxableItems\": [\r\n        {\r\n          \"taxType\": \"T1\",\r\n          \"amount\": 272.07,\r\n          \"subType\": \"T1\",\r\n          \"rate\": 14\r\n        },\r\n        {\r\n          \"taxType\": \"T2\",\r\n          \"amount\": 208.22,\r\n          \"subType\": \"T2\",\r\n          \"rate\": 12\r\n        },\r\n        {\r\n          \"taxType\": \"T3\",\r\n          \"amount\": 30,\r\n          \"subType\": \"T3\",\r\n          \"rate\": 0\r\n        },\r\n        {\r\n          \"taxType\": \"T4\",\r\n          \"amount\": 43.79,\r\n          \"subType\": \"T4\",\r\n          \"rate\": 5\r\n        },\r\n        {\r\n          \"taxType\": \"T5\",\r\n          \"amount\": 123.3,\r\n          \"subType\": \"T5\",\r\n          \"rate\": 14\r\n        },\r\n        {\r\n          \"taxType\": \"T6\",\r\n          \"amount\": 60,\r\n          \"subType\": \"T6\",\r\n          \"rate\": 0\r\n        },\r\n        {\r\n          \"taxType\": \"T7\",\r\n          \"amount\": 88.07,\r\n          \"subType\": \"T7\",\r\n          \"rate\": 10\r\n        },\r\n        {\r\n          \"taxType\": \"T8\",\r\n          \"amount\": 123.3,\r\n          \"subType\": \"T8\",\r\n          \"rate\": 14\r\n        },\r\n        {\r\n          \"taxType\": \"T9\",\r\n          \"amount\": 105.69,\r\n          \"subType\": \"T9\",\r\n          \"rate\": 12\r\n        },\r\n        {\r\n          \"taxType\": \"T10\",\r\n          \"amount\": 88.07,\r\n          \"subType\": \"T10\",\r\n          \"rate\": 10\r\n        },\r\n        {\r\n          \"taxType\": \"T11\",\r\n          \"amount\": 123.3,\r\n          \"subType\": \"T11\",\r\n          \"rate\": 14\r\n        },\r\n        {\r\n          \"taxType\": \"T12\",\r\n          \"amount\": 105.69,\r\n          \"subType\": \"T12\",\r\n          \"rate\": 12\r\n        },\r\n        {\r\n          \"taxType\": \"T13\",\r\n          \"amount\": 88.07,\r\n          \"subType\": \"T13\",\r\n          \"rate\": 10\r\n        },\r\n        {\r\n          \"taxType\": \"T14\",\r\n          \"amount\": 123.3,\r\n          \"subType\": \"T14\",\r\n          \"rate\": 14\r\n        },\r\n        {\r\n          \"taxType\": \"T15\",\r\n          \"amount\": 105.69,\r\n          \"subType\": \"T15\",\r\n          \"rate\": 12\r\n        },\r\n        {\r\n          \"taxType\": \"T16\",\r\n          \"amount\": 88.07,\r\n          \"subType\": \"T16\",\r\n          \"rate\": 10\r\n        },\r\n        {\r\n          \"taxType\": \"T17\",\r\n          \"amount\": 88.07,\r\n          \"subType\": \"T17\",\r\n          \"rate\": 10\r\n        },\r\n        {\r\n          \"taxType\": \"T18\",\r\n          \"amount\": 123.3,\r\n          \"subType\": \"T18\",\r\n          \"rate\": 14\r\n        },\r\n        {\r\n          \"taxType\": \"T19\",\r\n          \"amount\": 105.69,\r\n          \"subType\": \"T19\",\r\n          \"rate\": 12\r\n        },\r\n        {\r\n          \"taxType\": \"T20\",\r\n          \"amount\": 88.07,\r\n          \"subType\": \"T20\",\r\n          \"rate\": 10\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      \"description\": \"Computer2\",\r\n      \"itemType\": \"GPC\",\r\n      \"itemCode\": \"6221218058490\",\r\n      \"unitType\": \"EA\",\r\n      \"quantity\": 7,\r\n      \"internalCode\": \"IC0\",\r\n      \"salesTotal\": 662.9,\r\n      \"total\": 2226.61,\r\n      \"valueDifference\": 6,\r\n      \"totalTaxableFees\": 621.51,\r\n      \"netTotal\": 652.9,\r\n      \"itemsDiscount\": 9,\r\n      \"unitValue\": {\r\n        \"currencySold\": \"EUR\",\r\n        \"amountEGP\": 94.7,\r\n        \"amountSold\": 5,\r\n        \"currencyExchangeRate\": 18.94\r\n      },\r\n      \"discount\": {\r\n        \"rate\": 0,\r\n        \"amount\": 10\r\n      },\r\n      \"taxableItems\": [\r\n        {\r\n          \"taxType\": \"T1\",\r\n          \"amount\": 205.47,\r\n          \"subType\": \"T1\",\r\n          \"rate\": 14\r\n        },\r\n        {\r\n          \"taxType\": \"T2\",\r\n          \"amount\": 157.25,\r\n          \"subType\": \"T2\",\r\n          \"rate\": 12\r\n        },\r\n        {\r\n          \"taxType\": \"T3\",\r\n          \"amount\": 30,\r\n          \"subType\": \"T3\",\r\n          \"rate\": 0\r\n        },\r\n        {\r\n          \"taxType\": \"T4\",\r\n          \"amount\": 32.2,\r\n          \"subType\": \"T4\",\r\n          \"rate\": 5\r\n        },\r\n        {\r\n          \"taxType\": \"T5\",\r\n          \"amount\": 91.41,\r\n          \"subType\": \"T5\",\r\n          \"rate\": 14\r\n        },\r\n        {\r\n          \"taxType\": \"T6\",\r\n          \"amount\": 60,\r\n          \"subType\": \"T6\",\r\n          \"rate\": 0\r\n        },\r\n        {\r\n          \"taxType\": \"T7\",\r\n          \"amount\": 65.29,\r\n          \"subType\": \"T7\",\r\n          \"rate\": 10\r\n        },\r\n        {\r\n          \"taxType\": \"T8\",\r\n          \"amount\": 91.41,\r\n          \"subType\": \"T8\",\r\n          \"rate\": 14\r\n        },\r\n        {\r\n          \"taxType\": \"T9\",\r\n          \"amount\": 78.35,\r\n          \"subType\": \"T9\",\r\n          \"rate\": 12\r\n        },\r\n        {\r\n          \"taxType\": \"T10\",\r\n          \"amount\": 65.29,\r\n          \"subType\": \"T10\",\r\n          \"rate\": 10\r\n        },\r\n        {\r\n          \"taxType\": \"T11\",\r\n          \"amount\": 91.41,\r\n          \"subType\": \"T11\",\r\n          \"rate\": 14\r\n        },\r\n        {\r\n          \"taxType\": \"T12\",\r\n          \"amount\": 78.35,\r\n          \"subType\": \"T12\",\r\n          \"rate\": 12\r\n        },\r\n        {\r\n          \"taxType\": \"T13\",\r\n          \"amount\": 65.29,\r\n          \"subType\": \"T13\",\r\n          \"rate\": 10\r\n        },\r\n        {\r\n          \"taxType\": \"T14\",\r\n          \"amount\": 91.41,\r\n          \"subType\": \"T14\",\r\n          \"rate\": 14\r\n        },\r\n        {\r\n          \"taxType\": \"T15\",\r\n          \"amount\": 78.35,\r\n          \"subType\": \"T15\",\r\n          \"rate\": 12\r\n        },\r\n        {\r\n          \"taxType\": \"T16\",\r\n          \"amount\": 65.29,\r\n          \"subType\": \"T16\",\r\n          \"rate\": 10\r\n        },\r\n        {\r\n          \"taxType\": \"T17\",\r\n          \"amount\": 65.29,\r\n          \"subType\": \"T17\",\r\n          \"rate\": 10\r\n        },\r\n        {\r\n          \"taxType\": \"T18\",\r\n          \"amount\": 91.41,\r\n          \"subType\": \"T18\",\r\n          \"rate\": 14\r\n        },\r\n        {\r\n          \"taxType\": \"T19\",\r\n          \"amount\": 78.35,\r\n          \"subType\": \"T19\",\r\n          \"rate\": 12\r\n        },\r\n        {\r\n          \"taxType\": \"T20\",\r\n          \"amount\": 65.29,\r\n          \"subType\": \"T20\",\r\n          \"rate\": 10\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  \"totalDiscountAmount\": 76.29,\r\n  \"totalSalesAmount\": 1609.9,\r\n  \"netAmount\": 1533.61,\r\n  \"taxTotals\": [\r\n    {\r\n      \"taxType\": \"T1\",\r\n      \"amount\": 477.54\r\n    },\r\n    {\r\n      \"taxType\": \"T2\",\r\n      \"amount\": 365.47\r\n    },\r\n    {\r\n      \"taxType\": \"T3\",\r\n      \"amount\": 60\r\n    },\r\n    {\r\n      \"taxType\": \"T4\",\r\n      \"amount\": 75.99\r\n    },\r\n    {\r\n      \"taxType\": \"T5\",\r\n      \"amount\": 214.71\r\n    },\r\n    {\r\n      \"taxType\": \"T6\",\r\n      \"amount\": 120\r\n    },\r\n    {\r\n      \"taxType\": \"T7\",\r\n      \"amount\": 153.36\r\n    },\r\n    {\r\n      \"taxType\": \"T8\",\r\n      \"amount\": 214.71\r\n    },\r\n    {\r\n      \"taxType\": \"T9\",\r\n      \"amount\": 184.04\r\n    },\r\n    {\r\n      \"taxType\": \"T10\",\r\n      \"amount\": 153.36\r\n    },\r\n    {\r\n      \"taxType\": \"T11\",\r\n      \"amount\": 214.71\r\n    },\r\n    {\r\n      \"taxType\": \"T12\",\r\n      \"amount\": 184.04\r\n    },\r\n    {\r\n      \"taxType\": \"T13\",\r\n      \"amount\": 153.36\r\n    },\r\n    {\r\n      \"taxType\": \"T14\",\r\n      \"amount\": 214.71\r\n    },\r\n    {\r\n      \"taxType\": \"T15\",\r\n      \"amount\": 184.04\r\n    },\r\n    {\r\n      \"taxType\": \"T16\",\r\n      \"amount\": 153.36\r\n    },\r\n    {\r\n      \"taxType\": \"T17\",\r\n      \"amount\": 153.36\r\n    },\r\n    {\r\n      \"taxType\": \"T18\",\r\n      \"amount\": 214.71\r\n    },\r\n    {\r\n      \"taxType\": \"T19\",\r\n      \"amount\": 184.04\r\n    },\r\n    {\r\n      \"taxType\": \"T20\",\r\n      \"amount\": 153.36\r\n    }\r\n  ],\r\n  \"totalAmount\": 5191.5,\r\n  \"extraDiscountAmount\": 5,\r\n  \"totalItemsDiscountAmount\": 14\r\n}";
JObject receipt = JObject.Parse(dto);


// Serialize & compute UUID
string uuid = EtaSerializer.ComputeUUID(receipt);

// Output
Console.WriteLine("Serialized JSON:\n" + receipt.ToString());
Console.WriteLine("\nSerialized for Hash:\n" + EtaSerializer.Serialize(receipt));
Console.WriteLine("\nGenerated UUID:\n" + uuid);